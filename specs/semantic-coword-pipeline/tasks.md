# 实施计划：语义共词管线

## 概述

本实施计划将现有的统计学共现网络基线系统升级为语义增强共词网络分析管线。实施方案遵循四个核心改造方向：确定性布局与可视化稳定性、总图优先的文件结构、词组级节点单位升级、以及动态停词自动发现机制。

## 任务

- [ ] 1. 升级核心数据结构和接口
  - 重构现有数据模型以支持总图/子图架构
  - 实现统一的节点词表和映射机制
  - 添加州级文档归属信息处理
  - _需求: 2.1, 2.3, 5.4_

- [ ] 1.1 为核心数据结构编写属性测试
  - **属性 5: 总图包含性**
  - **验证：需求 2.1, 2.2**

- [ ] 1.2 为节点映射编写属性测试
  - **属性 21: 节点映射唯一性**
  - **验证：需求 5.4**

- [ ] 2. 实现确定性布局引擎
  - 创建基于固定种子的力导向布局算法
  - 实现节点位置缓存机制
  - 添加可视化过滤和标注分层功能
  - _需求: 1.1, 1.3, 1.4, 1.5_

- [ ] 2.1 为布局确定性编写属性测试
  - **属性 1: 布局确定性**
  - **验证：需求 1.1**

- [ ] 2.2 为位置缓存一致性编写属性测试
  - **属性 3: 节点位置缓存一致性**
  - **验证：需求 1.4, 2.4, 6.4**

- [ ] 2.3 为可视化过滤编写属性测试
  - **属性 2: 可视化过滤一致性**
  - **验证：需求 1.3**

- [ ] 3. 升级词组抽取系统
  - 增强现有的英文2-gram抽取，添加统计约束筛选
  - 改进中文分词和短语生成逻辑
  - 实现多词短语扩展支持
  - _需求: 3.1, 3.2, 3.3, 3.6_

- [ ] 3.1 为英文2-gram生成编写属性测试
  - **属性 9: 英文2-gram生成**
  - **验证：需求 3.1**

- [ ] 3.2 为统计约束筛选编写属性测试
  - **属性 10: 统计约束筛选**
  - **验证：需求 3.2**

- [ ] 3.3 为中文分词处理编写属性测试
  - **属性 11: 中文分词处理**
  - **验证：需求 3.3**

- [ ] 4. 实现动态停词发现机制
  - 创建TF-IDF计算模块
  - 实现基于文档频率和区分度的停词识别
  - 添加停词表合并和过滤功能
  - _需求: 4.1, 4.2, 4.4, 4.5_

- [ ] 4.1 为TF-IDF计算编写属性测试
  - **属性 14: TF-IDF计算正确性**
  - **验证：需求 4.1**

- [ ] 4.2 为动态停词识别编写属性测试
  - **属性 15: 动态停词识别准确性**
  - **验证：需求 4.2**

- [ ] 4.3 为停词过滤编写属性测试
  - **属性 17: 停词过滤彻底性**
  - **验证：需求 4.5**

- [ ] 5. 检查点 - 确保核心模块测试通过
  - 确保所有测试通过，如有问题请询问用户

- [ ] 6. 重构网络构建系统
  - 实现总图优先的构建策略
  - 添加州级子图激活和提取功能
  - 升级共现计算以支持多种权重方式
  - _需求: 2.1, 2.2, 6.1, 6.2, 5.5, 5.6_

- [ ] 6.1 为子图激活编写属性测试
  - **属性 6: 子图激活正确性**
  - **验证：需求 2.2, 6.1**

- [ ] 6.2 为子图重加权编写属性测试
  - **属性 24: 子图重加权正确性**
  - **验证：需求 6.2**

- [ ] 6.3 为共现关系编写属性测试
  - **属性 22: 共现关系无向性**
  - **验证：需求 5.5**

- [ ] 7. 实现输入处理增强
  - 升级TOC文档加载器以支持州级归属
  - 改进语言检测和文本预处理
  - 添加窗口边界严格控制
  - _需求: 5.1, 5.2, 5.3_

- [ ] 7.1 为JSON格式解析编写属性测试
  - **属性 18: JSON格式解析正确性**
  - **验证：需求 5.1**

- [ ] 7.2 为窗口边界编写属性测试
  - **属性 19: 窗口边界一致性**
  - **验证：需求 5.2**

- [ ] 8. 创建批处理和输出管理系统
  - 实现自动批处理所有toc_doc文件
  - 创建结构化输出管理器
  - 添加主图和州级子图的独立输出
  - _需求: 7.1, 7.2, 7.3, 7.4_

- [ ] 8.1 为批处理完整性编写属性测试
  - **属性 26: 批处理完整性**
  - **验证：需求 7.1**

- [ ] 8.2 编写输出格式单元测试
  - 测试所有输出文件的格式正确性
  - _需求: 7.2, 7.3, 7.4_

- [ ] 9. 实现网络分析和对比功能
  - 添加网络统计指标计算
  - 实现多维度结构对比分析
  - 创建高级网络指标计算模块
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 9.1 为网络统计指标编写属性测试
  - **属性 27: 网络统计指标正确性**
  - **验证：需求 8.4**

- [ ] 9.2 为高级网络指标编写属性测试
  - **属性 28: 高级网络指标准确性**
  - **验证：需求 8.5**

- [ ] 9.3 编写对比分析单元测试
  - 测试不同设置对网络结构的影响对比
  - _需求: 8.1, 8.2, 8.3_

- [ ] 10. 检查点 - 确保网络分析功能正常
  - 确保所有测试通过，如有问题请询问用户

- [ ] 11. 实现EasyGraph/OpenRank兼容接口
  - 创建标准化数据格式输出
  - 实现图融合准备功能
  - 添加多视图图支持接口
  - _需求: 9.3, 9.4, 9.5, 9.6_

- [ ] 11.1 编写兼容性接口单元测试
  - 测试EasyGraph/OpenRank格式兼容性
  - _需求: 9.5_

- [ ] 11.2 编写图融合接口单元测试
  - 测试union/consensus/加权融合方法
  - _需求: 9.4_

- [ ] 12. 创建文档和追溯系统
  - 实现结构化文档生成
  - 添加技术选择记录功能
  - 创建处理过程追溯机制
  - _需求: 10.1, 10.2, 10.3, 10.5_

- [ ] 12.1 编写文档生成单元测试
  - 测试结构化文档的完整性和格式
  - _需求: 10.1, 10.2_

- [ ] 12.2 编写追溯系统单元测试
  - 测试处理过程记录的完整性
  - _需求: 10.5_

- [ ] 13. 集成和系统测试
  - 整合所有模块到统一管线
  - 实现单一入口点执行
  - 添加错误处理和恢复机制
  - _需求: 所有需求的集成验证_

- [ ] 13.1 编写端到端集成测试
  - 测试完整管线的功能正确性
  - 验证所有输出文件的生成

- [ ] 13.2 编写错误处理单元测试
  - 测试各种错误情况的处理
  - 验证错误恢复机制

- [ ] 14. 性能优化和最终验证
  - 优化大规模数据处理性能
  - 验证内存使用和处理时间
  - 完成最终的质量检查报告
  - _需求: 7.1, 性能相关需求_

- [ ] 14.1 编写性能测试
  - 测试大规模数据处理能力
  - 验证内存使用合理性

- [ ] 15. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，生成最终质量报告

## 注意事项

- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证和用户反馈
- 属性测试验证通用正确性属性
- 单元测试验证具体示例和边界情况
- 所有测试任务都是必需的，确保全面的质量保证