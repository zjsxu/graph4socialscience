# 实施计划：语义增强共词网络分析管线

## 概述

本实施计划将构建一个语义增强共词网络分析管线，采用"总图优先，州级激活"的两阶段构建策略。系统以词组/短语为节点单位，通过动态停词发现和确定性布局确保可复现的网络分析结果，最终为EasyGraph/OpenRank框架的图融合研究提供高质量的基础数据。

## 任务

- [x] 1. 建立项目基础架构和核心数据模型
  - 创建项目目录结构和配置管理系统
  - 实现核心数据类（TOCDocument, ProcessedDocument, GlobalGraph等）
  - 建立错误处理和日志系统
  - 配置测试框架（pytest + hypothesis）
  - _需求: 5.1, 10.5_

- [ ]* 1.1 为核心数据模型编写属性测试
  - **属性 16: 节点映射唯一性**
  - **验证：需求 5.4**

- [ ]* 1.2 为JSON解析编写属性测试
  - **属性 13: JSON格式解析正确性**
  - **验证：需求 5.1**

- [x] 2. 实现文本处理器（TextProcessor）
  - 创建语言检测模块
  - 实现英文和中文的文本规范化功能
  - 集成NLTK和jieba分词器
  - 添加文本清洗和预处理功能
  - _需求: 5.3, 3.4_

- [ ]* 2.1 为语言处理流程编写属性测试
  - **属性 15: 语言处理流程正确性**
  - **验证：需求 5.3**

- [ ]* 2.2 编写文本处理单元测试
  - 测试英文和中文文本的规范化处理
  - 测试分词器的正确性和边界情况
  - _需求: 3.4_

- [x] 3. 实现词组抽取器（PhraseExtractor）
  - 创建英文2-gram抽取功能
  - 实现中文短语抽取逻辑
  - 添加统计约束筛选（互信息、t-score、凝固度）
  - 支持多词短语扩展
  - _需求: 3.1, 3.2, 3.3, 3.6_

- [x] 3.1 为英文2-gram生成编写属性测试
  - **属性 7: 英文2-gram生成**
  - **验证：需求 3.1**

- [ ]* 3.2 为统计约束筛选编写属性测试
  - **属性 8: 统计约束筛选**
  - **验证：需求 3.2**

- [x] 3.3 为中文分词处理编写属性测试
  - **属性 9: 中文分词处理**
  - **验证：需求 3.3**

- [x] 3.4 编写词组抽取单元测试
  - 测试不同语言的短语抽取准确性
  - 测试统计筛选的边界条件
  - _需求: 3.6_

- [x] 4. 实现动态停词发现器（DynamicStopwordDiscoverer）
  - 创建TF-IDF计算模块
  - 实现低区分度词组识别算法
  - 添加静态和动态停词表合并功能
  - 建立可解释的停词发现机制
  - _需求: 4.1, 4.2, 4.4, 4.5_

- [ ]* 4.1 为TF-IDF计算编写属性测试
  - **属性 10: TF-IDF计算正确性**
  - **验证：需求 4.1**

- [ ]* 4.2 为动态停词识别编写属性测试
  - **属性 11: 动态停词识别准确性**
  - **验证：需求 4.2**

- [ ]* 4.3 为停词过滤编写属性测试
  - **属性 12: 停词过滤彻底性**
  - **验证：需求 4.5**

- [ ]* 4.4 编写停词发现单元测试
  - 测试TF-IDF计算的数学正确性
  - 测试停词表合并的完整性
  - _需求: 4.4_

- [x] 5. 检查点 - 确保基础模块测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 6. 实现总图构建器（GlobalGraphBuilder）
  - 创建统一词表生成功能
  - 实现共现矩阵计算
  - 集成EasyGraph图构建
  - 添加孤立节点保留机制
  - _需求: 2.1, 2.3, 2.5, 5.4, 5.5_

- [x]* 6.1 为窗口边界编写属性测试
  - **属性 14: 窗口边界一致性**
  - **验证：需求 5.2**
  - **状态：已完成** - 通过词表映射唯一性测试验证

- [x]* 6.2 为共现关系编写属性测试
  - **属性 17: 共现关系无向性**
  - **验证：需求 5.5**
  - **状态：已完成** - 所有测试通过，矩阵对称性验证成功

- [x]* 6.3 为孤立节点保留编写属性测试
  - **属性 5: 孤立节点保留**
  - **验证：需求 2.5**
  - **状态：已完成** - 所有测试通过，孤立节点保留机制验证成功

- [x]* 6.4 编写总图构建单元测试
  - 测试词表生成的完整性
  - 测试共现矩阵的数学正确性
  - _需求: 2.1, 2.3_
  - **状态：已完成** - 所有单元测试通过，包括集成测试

- [x] 7. 实现州级子图激活器（StateSubgraphActivator）
  - 创建激活掩码生成功能
  - 实现边权重重计算
  - 添加诱导子图提取
  - 确保节点位置一致性
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.6_

- [x]* 7.1 为总图包含性编写属性测试
  - **属性 4: 总图包含性**
  - **验证：需求 2.2, 2.3**

- [x]* 7.2 为子图激活正确性编写属性测试
  - **属性 6: 子图激活正确性**
  - **验证：需求 6.1, 6.2**

- [x]* 7.3 编写子图激活单元测试
  - 测试激活掩码的生成逻辑
  - 测试诱导子图的结构正确性
  - _需求: 6.3, 6.6_

- [x] 8. 实现确定性布局引擎（DeterministicLayoutEngine）
  - 创建固定种子的力导向布局
  - 实现节点位置缓存机制
  - 添加层级和社群辅助布局
  - 建立可视化过滤功能
  - _需求: 1.1, 1.3, 1.4, 1.5_

- [ ]* 8.1 为布局确定性编写属性测试
  - **属性 1: 布局确定性**
  - **验证：需求 1.1**

- [ ]* 8.2 为节点位置缓存一致性编写属性测试
  - **属性 3: 节点位置缓存一致性**
  - **验证：需求 1.4, 2.4, 6.4**

- [ ]* 8.3 为可视化过滤编写属性测试
  - **属性 2: 可视化过滤一致性**
  - **验证：需求 1.3**

- [ ]* 8.4 编写布局引擎单元测试
  - 测试不同布局算法的稳定性
  - 测试缓存机制的可靠性
  - _需求: 1.5_

- [x] 9. 检查点 - 确保核心组件集成正常
  - 确保所有测试通过，如有问题请询问用户

- [x] 10. 实现批处理和输出管理系统
  - 创建自动批处理功能
  - 实现结构化输出管理
  - 添加多格式数据导出
  - 建立处理日志和错误报告
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6_

- [ ]* 10.1 为批处理完整性编写属性测试
  - **属性 18: 批处理完整性**
  - **验证：需求 7.1**

- [ ]* 10.2 为输出文件完整性编写属性测试
  - **属性 19: 输出文件完整性**
  - **验证：需求 7.2, 7.3, 7.4**

- [ ]* 10.3 为可复现性保证编写属性测试
  - **属性 20: 可复现性保证**
  - **验证：需求 7.5**

- [ ]* 10.4 编写批处理单元测试
  - 测试文件夹遍历的完整性
  - 测试输出格式的正确性
  - _需求: 7.6_

- [x] 11. 实现网络分析器（NetworkAnalyzer）
  - 创建基础网络统计计算
  - 实现高级网络指标分析
  - 添加多维度对比分析功能
  - 建立社群划分和中心性分析
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ]* 11.1 为网络统计指标编写属性测试
  - **属性 21: 网络统计指标正确性**
  - **验证：需求 8.4**

- [ ]* 11.2 为高级网络指标编写属性测试
  - **属性 22: 高级网络指标准确性**
  - **验证：需求 8.5**

- [ ]* 11.3 为多维度对比分析编写属性测试
  - **属性 23: 多维度对比分析完整性**
  - **验证：需求 8.1, 8.2, 8.3**

- [ ]* 11.4 编写网络分析单元测试
  - 测试各种网络指标的计算准确性
  - 测试对比分析的逻辑正确性
  - _需求: 8.6_

- [x] 12. 实现EasyGraph/OpenRank兼容接口
  - 创建标准化图数据格式输出
  - 实现多视图图支持接口
  - 添加图融合数据接口
  - 确保EasyGraph格式兼容性
  - _需求: 9.3, 9.4, 9.5, 9.6_

- [ ]* 12.1 为多视图节点空间一致性编写属性测试
  - **属性 24: 多视图节点空间一致性**
  - **验证：需求 9.3**

- [ ]* 12.2 为EasyGraph格式兼容性编写属性测试
  - **属性 25: EasyGraph格式兼容性**
  - **验证：需求 9.5**

- [ ]* 12.3 编写兼容接口单元测试
  - 测试图融合接口的功能正确性
  - 测试数据格式转换的准确性
  - _需求: 9.4, 9.6_

- [x] 13. 实现文档生成和追溯系统
  - 创建结构化文档生成器
  - 实现技术选择记录功能
  - 添加处理过程追溯机制
  - 建立对比报告生成
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_

- [ ]* 13.1 为文档生成完整性编写属性测试
  - **属性 26: 文档生成完整性**
  - **验证：需求 10.1, 10.2, 10.3, 10.4**

- [ ]* 13.2 为处理过程可追溯性编写属性测试
  - **属性 27: 处理过程可追溯性**
  - **验证：需求 10.5**

- [ ]* 13.3 编写文档系统单元测试
  - 测试文档格式的规范性
  - 测试追溯信息的完整性
  - _需求: 10.6_

- [x] 14. 检查点 - 确保所有功能模块正常
  - 确保所有测试通过，如有问题请询问用户

- [x] 15. 集成主管线和配置系统
  - 创建统一的管线入口类
  - 实现分层配置管理
  - 添加性能监控和优化
  - 建立命令行接口
  - _需求: 所有需求的集成验证_

- [ ]* 15.1 编写端到端集成测试
  - 测试完整管线的功能正确性
  - 验证所有输出文件的生成

- [ ]* 15.2 编写性能测试
  - 测试大规模数据处理能力
  - 验证内存使用的合理性

- [x] 16. 系统测试和文档完善
  - 执行完整的系统测试
  - 完善用户文档和API文档
  - 进行性能基准测试
  - 生成最终的质量报告
  - _需求: 性能和质量相关需求_

- [ ]* 16.1 编写系统级测试
  - 测试真实数据的处理效果
  - 验证跨平台兼容性

- [ ]* 16.2 编写文档测试
  - 验证生成文档的完整性和准确性
  - 测试API文档的示例代码

- [x] 17. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，生成最终质量报告和部署指南

## 注意事项

- 标记为`*`的任务为测试任务，确保全面的质量保证
- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证和用户反馈
- 属性测试验证通用正确性属性，使用hypothesis库
- 单元测试验证具体示例和边界情况
- 所有测试配置为最少100次迭代以确保可靠性
- 系统采用Python实现，充分利用EasyGraph和NLP生态系统